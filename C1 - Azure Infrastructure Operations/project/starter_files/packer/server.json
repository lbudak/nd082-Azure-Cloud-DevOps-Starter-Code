{
	"variables": {
		"client_id": "",
		"client_secret": "",
		"subscription_id": ""
	},
	"builders": [
		{
			"type": "azure-arm",

			"client_id": "{{env `ARM_CLIENT_ID`}}",
			"client_secret": "{{env `ARM_CLIENT_SECRET`}}",
			"subscription_id": "{{env `ARM_SUBSCRIPTION_ID`}}",

			"os_type": "Linux",
			"image_publisher": "Canonical",
			"image_offer": "UbuntuServer",
			"image_sku": "18.04-LTS",

			"azure_tags": {
				"type": "packerImageBuild"
			},
			
			"managed_image_resource_group_name": "udacity-demo-rg",
			"managed_image_name": "projectPackerImage",
			"location": "West Europe",
			"use_azure_cli_auth": true,
			"vm_size": "Standard_D2s_v3"
		}
	],
	"provisioners": [
		{
			"inline": [
				"echo 'Hello, World!' > index.html",
				"nohup busybox httpd -f -p 80 &"
			],
			"inline_shebang": "/bin/sh -x",
			"type": "shell",
			"execute_command": "chmod +x {{ .Path }}; {{ .Vars }} sudo -E sh '{{ .Path }}'"
		}
	]
}